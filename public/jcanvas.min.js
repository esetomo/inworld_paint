/*
jCanvas v2.4
Caleb Evans
*/
(function(f,b,d,g){var c={};c.defaults={width:0,height:0,cornerRadius:0,fillStyle:"transparent",strokeStyle:"transparent",strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",shadowX:0,shadowY:0,shadowBlur:3,shadowColor:"transparent",x:0,y:0,x1:0,y1:0,radius:0,start:0,end:360,ccw:false,inDegrees:true,fromCenter:true,closed:false,sides:3,angle:0,text:"",font:"normal 12pt sans-serif",align:"center",baseline:"middle",source:"",repeat:"repeat"};c.prefs=f.extend({},c.defaults);function e(i,j){i.fillStyle=j.fillStyle||j.fillColor;i.strokeStyle=j.strokeStyle||j.strokeColor;i.lineWidth=j.strokeWidth;i.lineCap=j.strokeCap;i.lineJoin=j.strokeJoin;i.shadowOffsetX=j.shadowX;i.shadowOffsetY=j.shadowY;i.shadowBlur=j.shadowBlur;i.shadowColor=j.shadowColor}function h(i,j){if(j.closed===true){i.closePath();i.fill();i.stroke()}else{i.fill();i.stroke();i.closePath()}}function a(i){if(i.inDegrees===true){return d.PI/180}else{return 1}}f.fn.canvas=function(i){if(i===g){c.prefs=c.defaults}else{c.prefs=f.extend({},c.prefs,i)}return this};f.fn.loadCanvas=function(i){if(i===g){i="2d"}return this[0].getContext(i)};f.fn.draw=function(j){var i=this.loadCanvas();j(i);return this};f.fn.gradient=function(k){var j=this.loadCanvas(),m={x1:0,y1:0,x2:0,y2:0,r1:10,r2:100},q=f.extend({},m,k),p,o=0,n,l=1;if(k.r1===g&&k.r2===g){p=j.createLinearGradient(q.x1,q.y1,q.x2,q.y2)}else{p=j.createRadialGradient(q.x1,q.y1,q.r1,q.x2,q.y2,q.r2)}while(q["c"+l]!==g){o+=1;l+=1}for(l=1;l<=o;l+=1){n=d.round((o-1)*(l-1));if(q["s"+l]===g){q["s"+l]=n}p.addColorStop(q["s"+l],q["c"+l])}return p};f.fn.pattern=function(l){var i=this.loadCanvas(),o=f.extend({},c.prefs,l),n,j=b.createElement("img");j.src=o.source;function m(){if(j.complete===true){n=i.createPattern(j,o.repeat)}else{throw"The pattern has not loaded yet"}}try{m()}catch(k){j.onload=m}return n};f.fn.clearCanvas=function(j){var i,k,l=f.extend({},c.prefs,j);if(l.fromCenter===true){l.x-=l.width/2;l.y-=l.height/2}for(k=0;k<this.length;k+=1){i=this[k].getContext("2d");e(i,l);i.beginPath();if(j===g){i.clearRect(0,0,this.width(),this.height())}else{i.clearRect(l.x,l.y,l.width,l.height)}i.closePath()}return this};f.fn.saveCanvas=function(){var i,j;for(j=0;j<this.length;j+=1){i=this[j].getContext("2d");i.save()}return this};f.fn.restoreCanvas=function(){var i,j;for(j=0;j<this.length;j+=1){i=this[j].getContext("2d");i.restore()}return this};f.fn.scaleCanvas=function(j){var i,k,l=f.extend({},c.prefs,j);for(k=0;k<this.length;k+=1){i=this[k].getContext("2d");i.save();i.translate(l.x,l.y);i.scale(l.width,l.height);i.translate(-l.x,-l.y)}return this};f.fn.translateCanvas=function(j){var i,k,l=f.extend({},c.prefs,j);for(k=0;k<this.length;k+=1){i=this[k].getContext("2d");i.save();i.translate(l.x,l.y)}return this};f.fn.rotateCanvas=function(j){var i,l,m=f.extend({},c.prefs,j),k=a(m);for(l=0;l<this.length;l+=1){i=this[l].getContext("2d");i.save();i.translate(m.x,m.y);i.rotate(m.angle*k);i.translate(-m.x,-m.y)}return this};f.fn.drawRect=function(n){var s,m,l=f.extend({},c.prefs,n),o=a(l),k,q,j,p,i;if(l.fromCenter===true){l.x-=l.width/2;l.y-=l.height/2}for(m=0;m<this.length;m+=1){s=this[m].getContext("2d");e(s,l);if(l.cornerRadius>0){k=l.x;q=l.y;j=l.x+l.width;p=l.y+l.height;i=l.cornerRadius;if((j-k)-(2*i)<0){i=(j-k)/2}if((p-q)-(2*i)<0){i=(p-q)/2}s.beginPath();s.moveTo(k+i,q);s.lineTo(j-i,q);s.arc(j-i,q+i,i,270*o,360*o,false);s.lineTo(j,p-i);s.arc(j-i,p-i,i,0,90*o,false);s.lineTo(k+i,p);s.arc(k+i,p-i,i,90*o,180*o,false);s.lineTo(k,q+i);s.arc(k+i,q+i,i,180*o,270*o,false);s.fill();s.stroke();s.closePath()}else{s.fillRect(l.x,l.y,l.width,l.height);s.strokeRect(l.x,l.y,l.width,l.height)}}return this};f.fn.drawArc=function(j){var i,l,m=f.extend({},c.prefs,j),k=a(m);if(m.fromCenter===false){m.x+=m.radius;m.y+=m.radius}for(l=0;l<this.length;l+=1){i=this[l].getContext("2d");e(i,m);i.beginPath();i.arc(m.x,m.y,m.radius,(m.start*k)-(d.PI/2),(m.end*k)-(d.PI/2),m.ccw);h(i,m)}return this};f.fn.drawEllipse=function(j){var i,l,m=f.extend({},c.prefs,j),k=m.width*(4/3);if(m.fromCenter===false){m.x+=m.width/2;m.y+=m.height/2}for(l=0;l<this.length;l+=1){i=this[l].getContext("2d");e(i,m);i.beginPath();i.moveTo(m.x,m.y-m.height/2);i.bezierCurveTo(m.x-k/2,m.y-m.height/2,m.x-k/2,m.y+m.height/2,m.x,m.y+m.height/2);i.bezierCurveTo(m.x+k/2,m.y+m.height/2,m.x+k/2,m.y-m.height/2,m.x,m.y-m.height/2);i.closePath();i.fill();i.stroke()}return this};f.fn.drawLine=function(k){var j,o,p=f.extend({},c.prefs,k),i=2,n=0,m=0;for(o=0;o<this.length;o+=1){j=this[o].getContext("2d");e(j,p);j.beginPath();j.moveTo(p.x1,p.y1);while(n>=0&&m>=0){n=p["x"+i];m=p["y"+i];j.lineTo(n,m);i+=1}h(j,p)}return this};f.fn.drawQuad=function(o){var r,n,m=f.extend({},c.prefs,o),k=2,j=0,i=0,q=0,p=0;for(n=0;n<this.length;n+=1){r=this[n].getContext("2d");e(r,m);r.beginPath();r.moveTo(m.x1,m.y1);while(j>=0&&i>=0&&q>=0&&p>=0){j=m["x"+k];i=m["y"+k];q=m["cx"+(k-1)];p=m["cy"+(k-1)];r.quadraticCurveTo(q,p,j,i);k+=1}h(r,m)}return this};f.fn.drawBezier=function(v){var w,u,q=f.extend({},c.prefs,v),p=2,m=1,s,o=0,n=0,t=0,k=0,r=0,j=0;for(u=0;u<this.length;u+=1){w=this[u].getContext("2d");e(w,q);w.beginPath();w.moveTo(q.x1,q.y1);while(o>=0&&n>=0&&t>=0&&k>=0&&r>=0&&j>=0){o=q["x"+p];n=q["y"+p];t=q["cx"+m];k=q["cy"+m];r=q["cx"+(m+1)];j=q["cy"+(m+1)];w.bezierCurveTo(t,k,r,j,o,n);p+=1;m+=2}h(w,q)}return this};f.fn.drawText=function(j){var i,k,l=f.extend({},c.prefs,j);for(k=0;k<this.length;k+=1){i=this[k].getContext("2d");e(i,l);i.textBaseline=l.baseline;i.textAlign=l.align;i.font=l.font;i.strokeText(l.text,l.x,l.y);i.fillText(l.text,l.x,l.y)}return this};f.fn.drawImage=function(m){var j,o,p=f.extend({},c.prefs,m),k=b.createElement("img"),l;k.src=p.source;function i(q){if(k.complete===true){l=k.width/k.height;if(m.width!==g&&m.height!==g){k.width=m.width;k.height=m.height}else{if(m.width!==g&&m.height===g){k.width=m.width;k.height=k.width/l}else{if(m.width===g&&m.height!==g){k.height=m.height;k.width=k.height*l}}}if(p.fromCenter===true){p.x-=k.width/2;p.y-=k.height/2}q.drawImage(k,p.x,p.y,k.width,k.height);return true}else{return false}}function n(){i(j)}for(o=0;o<this.length;o+=1){j=this[o].getContext("2d");e(j,p);if(i(j)===false){k.onload=n}}return this};f.fn.drawPolygon=function(n){var s,m,k=f.extend({},c.prefs,n),j,r,q,p,o=a(k),l;k.closed=true;j=(d.PI/2)+(d.PI/k.sides)+(k.angle*o);r=(d.PI*2)/k.sides;for(m=0;m<this.length;m+=1){s=this[m].getContext("2d");e(s,k);if(k.sides>=3){for(l=0;l<k.sides;l+=1){q=k.x+(k.radius*d.cos(j));p=k.y+(k.radius*d.sin(j));if(k.fromCenter===false){q+=k.radius;p+=k.radius}s.lineTo(q,p);j+=r}h(s,k)}}return this};return(f.jCanvas=c)}(jQuery,document,Math));